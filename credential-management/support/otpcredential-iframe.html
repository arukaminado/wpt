<script src="./otpcredential-helper.js"></script>
<script>
'use strict';

// Intercept successful calls and return mocked value.
(async function() {
  await expect(receive).andReturn(() => {
      return Promise.resolve({
        status: Status.kSuccess,
        otp: "ABC123",
      });
  });
}());

window.onload = function() {
  navigator.credentials.get({otp: {transport: ["sms"]}})
   .then(c => {
     window.parent.postMessage({result: "Pass", code: c.code}, '*');
   })
   .catch(error => {
     window.parent.postMessage({result: "Fail", errorType: error.name}, '*');
   });
}

</script>
